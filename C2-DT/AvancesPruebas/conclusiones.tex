%============Conclusiones y trabajo a futuro===============

\section{Conclusiones}

Se revisaron las opciones de sensor disponibles y se seleccionó el sensor de tipo fotopletismógrafo debido a que al realizar las pruebas fue con el que se obtuvieron mejores resultados. Este sensor de tipo analógico el cual entrega una salida de 0 a 3.3 V por lo que se configuró el periférico del convertidor analógico digital del microcontrolador para una frecuencia de muestreo de 128 Hz, obteniendo una señal digital con una resolución de 12 bits.\\

Se revisaron las opciones de sensor disponibles y se seleccionó un sensor digital con uso específico en aplicaciones médicas con interfaz de tipo I2C el cual entrega una señal con una resolución de 16 bits, lo que permite tener una resolución de 0.00390625$^{\circ}$C. Para establecer la comunicación con el microcontrolador, se configuró el periférico I2C a una frecuencia de operación de 400 KHz en el dispositivo maestro.\\

Para establecer la comunicación entre el sistema embebido y el teléfono celular se utiliza una comunicación inalámbrica mediante mensajes de texto. En una primera aproximación se utilizó la red GSM, sin embargo durante el desarrollo del proyecto, las antenas que permiten la comunicación fueron apagadas por lo que se tuvo la necesidad de migrar a las redes UMTS y LTE.\\

Se revisaron opciones del chip de comunicación disponibles y se optó por el módulo 4G que permite establecer comunicación con el microcontrolador mediante UART por lo que se configuró el módulo UART en el microcontrolador a una tasa de transferencia de 19200 baudios.\\

Una vez obtenida la señal de frecuencia cardíaca se realizó un procesamiento sobre ella el cual consistió en aplicar un offset de 2048 unidades sobre la señal para poder caracterizarla y aplicar una ventana de Hamming a 1600 muestras y después el algoritmo de autocorrelación parcial para obtener el espectro de frecuencia de la señal. Sobre el espectro de frecuencia de la señal se aplicó el algoritmo para la búsqueda de la frecuencia fundamental y sobre el resultado el cálculo de la frecuencia cardíaca.\\

Para la señal de temperatura debido a que el resultado se guardó en dos registros diferentes se realizó el cálculo del valor real mediante la multiplicación de la parte baja del valor por la resolución del sensor y se sumó a la parte alta de la medición.\\

Finalmente, se configuró el módulo 4G para realizar el envío de mensajes bajo dos premisas, envío por tiempo cada minuto, sin embargo este valor es configurable, o al detectar un valor fuera de la ventana definida como normal de 60 a 100 latidos por minuto. un umbral de 110 o 50  latidos por minuto y temperatura 36$^{\circ}$C a 37$^{\circ}$C.\\ 

Al momento de realizar los cálculos se obtiene la fecha y hora de la red 4G proporcionada por el módulo 4G. Con estos dos valores se generó la trama a enviar mediante el mensaje de texto el cual contiene los valores de frecuencia cardíaca y temperatura.


